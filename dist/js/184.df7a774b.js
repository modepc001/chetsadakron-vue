"use strict";(self["webpackChunkaunweb"]=self["webpackChunkaunweb"]||[]).push([[184],{184:function(t,e,s){s.r(e),s.d(e,{default:function(){return u}});var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"vue-tempalte",staticStyle:{"background-color":"#ffffff"}},[t._m(0),i("div",{staticStyle:{margin:"20px"}},[i("div",{staticClass:"input-group mb-3"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search","aria-label":"Search","aria-describedby":"basic-addon2"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),i("div",{staticClass:"input-group-append"},[i("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(e){return t.getProducts()}}},[t._v("ค้นหา")])])]),i("table",{staticClass:"table is-striped is-bordered mt-2 is-fullwidth"},[i("thead",[i("tr",[i("th",[t._v("รหัสสินค้า")]),i("th",[t._v("บาร์โค้ด")]),i("th",[t._v("ชื่อสินค้า")]),i("th",[t._v("ราคา")]),i("th",[t._v("รายละเอียด")]),i("th",{staticClass:"has-text-centered",staticStyle:{width:"220px"}},[i("div",{staticClass:"btn btn-outline-primary nav-link pr-3 p-2 ml-2",on:{click:t.addProduct}},[i("img",{staticClass:"ml-2",attrs:{src:s(1582),width:"40px",height:"40px"}})])])])]),i("tbody",t._l(t.items,(function(e,a){return i("tr",{key:e.product_id},[i("td",[t._v(t._s(e.product_code))]),i("td",[t._v(t._s(e.product_barcode))]),i("td",[t._v(t._s(e.product_name))]),i("td",[t._v(t._s(e.product_price))]),i("td",[t._v(t._s(e.product_detail))]),i("td",[i("div",{staticClass:"row"},[i("div",{staticClass:"col"},[i("img",{staticClass:"ml-2",attrs:{src:s(310),width:"40px",height:"40px"},on:{click:function(e){return t.editProduct(a)}}})]),i("div",{staticClass:"col"},[i("img",{staticClass:"ml-2",attrs:{src:s(529),width:"40px",height:"40px"},on:{click:function(e){return t.uploadProduct(a)}}})]),i("div",{staticClass:"col"},[i("img",{attrs:{src:s(3256),width:"40px",height:"40px"},on:{click:function(s){return t.deleteProduct(e.product_id,e.product_code,e.product_name)}}})])])])])})),0)])]),i("div",[i("b-modal",{ref:"my-modal",attrs:{"hide-footer":"",title:"ลบข้อมูล"}},[i("div",{staticClass:"row"},[i("div",{staticClass:"d-block text-center"},[i("h3",[t._v("คุณต้องการลบข้อมูลนี้ใช่หรือไม่...!")])]),i("div",{staticClass:"d-block text-center"},[i("h5",[t._v(t._s(t.product_code)+" : "+t._s(t.product_name))])]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.product_id,expression:"product_id"}],staticClass:"form-control form-control-lg",attrs:{type:"hidden",id:"product_id"},domProps:{value:t.product_id},on:{input:function(e){e.target.composing||(t.product_id=e.target.value)}}})]),i("hr"),i("div",{staticClass:"row"},[i("div",{staticClass:"col flex-column"},[i("div",{staticClass:"btn btn-outline-danger nav-link pr-3 p-2 ml-2",on:{click:t.hideModal}},[t._v("ยกเลิก")])]),i("div",{staticClass:"col flex-column"}),i("div",{staticClass:"col flex-column"},[i("div",{staticClass:"btn btn-outline-success nav-link pr-3 p-2 ml-2 align-self-end",on:{click:function(e){return t.toggleModal()}}},[t._v("ตกลง")])])])])],1),i("div",{staticStyle:{"margin-top":"50px"}},[i("b-modal",{ref:"upload-modal",attrs:{"hide-footer":"",title:"อับโหลด ไฟล์..."}},[i("div",{staticClass:"container-fluid"},[i("div",[i("div",{staticClass:"imagePreviewWrapper",style:{"background-image":"url("+t.previewImage+")"},on:{click:t.selectImage}}),i("input",{ref:"fileInput",attrs:{type:"file"},on:{input:t.pickFile}})])]),i("div",{staticClass:"row mt-3"},[i("div",{staticClass:"col flex-column"},[i("div",{staticClass:"btn btn-outline-danger nav-link pr-3 p-2 ml-2",on:{click:t.hideModal}},[t._v("ยกเลิก")])]),i("div",{staticClass:"col flex-column"}),i("div",{staticClass:"col flex-column"},[i("div",{staticClass:"btn btn-outline-success nav-link pr-3 p-2 ml-2 align-self-end",on:{click:function(e){return t.toggleModal()}}},[t._v("ตกลง")])])])])],1)])},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",[i("img",{attrs:{src:s(3079),width:"100%",height:"350"}})])}],c=s(6166),o=s.n(c),r={name:"ProductList",data(){return{uname:"",search:"",product_id:"",product_code:"",product_barcode:"",product_name:"",product_price:"",product_detail:"",items:[]}},created(){""!=this.$route.params.uname?(this.uname=this.$route.params.uname,this.getProducts()):this.$router.push("/")},methods:{async getProducts(){try{console.log(this.search);const t=await o().post("http://phc.dyndns.biz:8088/products",{product_name:this.search});this.items=t.data}catch(t){console.log(t)}},async deleteProduct(t,e,s){this.product_id=t,this.product_code=e,this.product_name=s,this.showModal()},addProduct(){this.$router.push("/add/"+this.uname)},editProduct(t){this.$router.push({name:"edit",params:{uname:this.uname,data:JSON.stringify(this.items[t])}})},uploadProduct(t){this.$refs["upload-modal"].show()},sweetAlert(){this.$swal({title:"Are you sure?",text:"You can't revert your action",type:"warning",showCancelButton:!0,confirmButtonText:"Yes Delete it!",cancelButtonText:"No, Keep it!",showCloseButton:!0,showLoaderOnConfirm:!0}).then((t=>{t.value?this.$swal("Deleted","You successfully deleted this file","success"):this.$swal("Cancelled","Your file is still intact","info")}))},showModal(){this.$refs["my-modal"].show()},hideModal(){this.$refs["my-modal"].hide(),this.$refs["upload-modal"].hide()},async toggleModal(){await o()["delete"](`http://phc.dyndns.biz:8088/products/${this.product_id}`),this.getProducts(),this.$refs["my-modal"].toggle("#toggle-btn")},selectImage(){this.$refs.fileInput.click()},pickFile(){let t=this.$refs.fileInput,e=t.files;if(e&&e[0]){let t=new FileReader;t.onload=t=>{this.previewImage=t.target.result},t.readAsDataURL(e[0]),this.$emit("input",e[0])}}}},l=r,d=s(1001),n=(0,d.Z)(l,i,a,!1,null,"c5eef924",null),u=n.exports},1582:function(t,e,s){t.exports=s.p+"img/addnew.c887fc7f.png"},310:function(t,e,s){t.exports=s.p+"img/edit.929d25cc.png"},3079:function(t,e,s){t.exports=s.p+"img/header01.25ae52e1.png"},3256:function(t,e,s){t.exports=s.p+"img/recycle-bin.307a5a31.png"},529:function(t,e,s){t.exports=s.p+"img/uploadfile.8435bd68.png"}}]);
//# sourceMappingURL=184.df7a774b.js.map